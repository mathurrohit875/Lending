package TimePass;import java.sql.*;public class tp {  private static int $;  public static void main(String[] args) {    // Database connection details    String dbUrl = "jdbc:sqlserver://103.231.41.61;databaseName=XPRESSO_MTEST"; // Replace with your database URL    String username = "sa"; // Replace with your username    String password = "UAT_R0INET_SQL"; // Replace with your password    Connection connection = null;    CallableStatement callableStatement = null;    Statement statement = null;    ResultSet resultSet = null;    try {      // 1. Establish a connection to the database      connection = DriverManager.getConnection(dbUrl, username, password);      for (int i = 0; i < 11; i++) {        // 2. Retrieve noofdueemi        String selectQuery = "SELECT noofdueemi FROM tm_Channelemi WHERE loanno='ROIC05230'";        statement = connection.createStatement();        resultSet = statement.executeQuery(selectQuery);        int noofdueemi = 0;        if (resultSet.next()) {          noofdueemi = resultSet.getInt("noofdueemi");          System.out.println("Initial noofdueemi: " + noofdueemi);        }        if (noofdueemi == 0) {          break;        }        // 3. Execute the stored procedure        String procedureCall = "{call usp_channelemideduct()}"; // Replace with your stored procedure        callableStatement = connection.prepareCall(procedureCall);        callableStatement.setQueryTimeout(300);        // Execute the stored procedure        callableStatement.execute();        System.out.println("Stored procedure executed successfully.");        // 4. Check if the procedure was successful by verifying noofdueemi is reduced by 1        resultSet = statement.executeQuery(selectQuery);        int updatedNoofdueemi = 0;        if (resultSet.next()) {          updatedNoofdueemi = resultSet.getInt("noofdueemi");          System.out.println("Updated noofdueemi after procedure: " + updatedNoofdueemi);        }        if (updatedNoofdueemi == noofdueemi - 1) {          System.out.println("Procedure executed successfully, noofdueemi reduced by 1.");          // 5. Update nextduedate if the procedure is successful          String updateQuery = "UPDATE tm_Channelemi SET nextduedate='2024-09-02' WHERE loanno='ROIC05230'";          int rowsAffected = statement.executeUpdate(updateQuery);          if (rowsAffected > 0) {            System.out.println("nextduedate updated successfully.");          } else {            System.out.println("Failed to update nextduedate.");          }        } else {          System.out.println("Procedure execution failed or noofdueemi was not reduced correctly.");        }        // Close resultSet after each loop iteration        if (resultSet != null) resultSet.close();      }    } catch (SQLException e) {      e.printStackTrace();    } finally {      // Close resources      try {        if (resultSet != null) resultSet.close();        if (callableStatement != null) callableStatement.close();        if (statement != null) statement.close();        if (connection != null) connection.close();      } catch (SQLException e) {        e.printStackTrace();      }    }  }}